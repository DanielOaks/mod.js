<!DOCTYPE HTML>
<html>
	<head>
		<script src="build.js"></script>

		<script>
			function play() {
				playing = true;
				status('<a href="javascript:pause();">Pause</a>');
				bufferMoreData();
			}

			function pause() {
				playing = false;
				status('<a href="javascript:play();">Play</a>');
			}

			function status(text) {
				document.getElementById('status').innerHTML = text;
			}

			function loadRemote(file) {
				player = Player.fromURL(file);
				player.play();

				player.on('buffer', function(percent) {
					document.getElementById('buffered').innerText = Math.floor(percent).toString();
				});

				player.on('progress', function(percent) {
					document.getElementById('played').innerText = Math.floor(percent).toString();
				});

				player.on('metadata', function(metadata) {
					if (metadata['title'] == '') {
						document.getElementById('title').innerText = "<unknown title>";
					} else {
						document.getElementById('title').innerText = metadata['title'];
					}
  				});

				player.on('error', function(error) {
					document.getElementById('error').innerText = error;
  				});
			}
		</script>

		<style>
			p {
				margin-top: 8px;
				margin-bottom: 8px;
			}

			#player {
				border: 1px solid #000;
				display: inline-block;
				padding: 10px;
			}
		</style>
	</head>
	<body>
		<h1>mod.js</h1>
		<p>Javascript MOD player using Aurora.js (eventually).</p>
		<p>This is a work in progress - not all effects are implemented yet.</p>
		<p>Refresh the page to stop audio immediately, the playback controls suck.</p>
	    <div id="player">
			<p><strong id="title">&lt;unknown title&gt;</strong></p>
			<p><span id="buffered">0</span>% buffered.</p>
			<p><span id="played">0</span>% played.</p>
			<p id="error"></p>
		</div>
		<ul>
			<li><a href="javascript:loadRemote('mods/ambpower.mod')">Ambient Power (Vogue / Triton)</a></li>
			<li><a href="javascript:loadRemote('mods/dope.mod')">Dope / Onward Ride (Jugi / Complex)</a></li>
			<li><a href="javascript:loadRemote('mods/frust.mod')">Mental Frustration (Nugget / Rebels)</a></li>
			<li><a href="javascript:loadRemote('mods/mindkick.mod')">Mindkick (Mindfuck / Mentasm)</a></li>
			<li><a href="javascript:loadRemote('mods/sundance.mod')">Sundance (Purple Motion / Future Crew)</a></li>
			<li><a href="javascript:loadRemote('mods/ode_to_protracker.mod')">Ode to Protracker (Asle / Sylvain Chipaux)</a></li>
			<li><a href="javascript:loadRemote('mods/RandomVoice-Monday.mod')">Monday (Edvin Fladen a.k.a "Random Voice")</a></li>
		</ul>
		<p>This is a work in progress - not all effects are implemented yet. Sound output is done with Ben Firshman's <a href="http://github.com/bfirsh/dynamicaudio.js">dynamicaudio.js</a> (using Firefox's audio data API, falling back on Flash if not available).</p>

		<p>Based on <a href="https://github.com/sneilan/jsmodplayer">jsmodplayer</a>.</p>
	</body>
</html>
